{% extends "nav.html" %}
{% block title %}
View File
{% endblock %}

{% block extraHead %}
<link href="https://mbraak.github.io/jqTree/jqtree.css" rel="stylesheet">
{% endblock %}

{% block body %}
<div class="container">
    <div class="header">
        <h3 class="text-muted">How To Upload a File</h3>
    </div>
    <hr/>
    <div>
        <div id="fileList"></div>
        <form action="upload" method="post" enctype="multipart/form-data">
            <input type="file" multiple="" name="gallery-upload" class="span3" /><br /> File Location: <input type="text" name="gallery_location" /><br /> Parent Directory Id: <input type="number" name="gallery_dir_id" readonly/><br />
            <input type="submit" value="Upload" class="span2">
        </form>
    </div>
</div>
{% endblock %}

{% block extraFooter %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqtree/1.3.5/tree.jquery.min.js"></script>
<script>
    $(function() {
        $.get("/api/get_dir_tree", function(data) {
            $('#fileList').tree({
                data: [data]
            });
            $('#fileList').bind(
                'tree.click',
                function(event) {
                    // The clicked node is 'event.node'
                    var node = event.node;
                    $('input[name="gallery_dir_id"]').val(node.id);
                }
            );
        });
    });
</script>
{% endblock %}
